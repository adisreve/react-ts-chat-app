(this["webpackJsonpdocler-frontend"]=this["webpackJsonpdocler-frontend"]||[]).push([[0],{177:function(e,t,n){e.exports=n(272)},186:function(e,t,n){},21:function(e,t,n){e.exports={chatPanelWrapper:"ChatPanel_chatPanelWrapper___8t2u",chatPanel:"ChatPanel_chatPanel__1J74_",bubbleContainer:"ChatPanel_bubbleContainer__1TSxV",paragraph:"ChatPanel_paragraph__1PDNB",chatPanel__avatar:"ChatPanel_chatPanel__avatar__2diuP",right:"ChatPanel_right__2DdJN",left:"ChatPanel_left__3-poo",chatPanel__messageBubble:"ChatPanel_chatPanel__messageBubble__3L_cK",date:"ChatPanel_date__1OmGF",avatar:"ChatPanel_avatar__1HoMN"}},269:function(e,t){},272:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(66),o=n.n(r),s=n(36),l=n(24),i=n(25),u=n(162),m=n(163),h=n(10),d=n(68),g=n(27),f=(n(186),n(69)),E=n(44),p=n.n(E),_=function(){return"dark"===localStorage.getItem("theme")},b=function(e){var t=Object(a.useState)(_),n=Object(h.a)(t,2),r=n[0],o=n[1];return c.a.createElement("div",{className:p.a.outerSwitch},c.a.createElement("input",{type:"checkbox",className:"".concat(p.a.switch," active").concat(r),id:"switch",defaultChecked:r,onClick:function(t){o(!r),e.toggleTheme(t)}}),c.a.createElement("label",{htmlFor:"switch",className:p.a.switchLabel},c.a.createElement("div",{className:p.a.toggle})))},v=function(){return{type:"GET_SETTINGS"}},S=n(45),k=n.n(S),N=Object(i.b)((function(e){return{messages:e.chat.messages,notifications:e.settings.unread}}),{getSettings:v,connectSocket:function(){return{type:"CONNECT_SOCKET"}}})((function(e){var t=Object(a.useState)([]),n=Object(h.a)(t,2),r=n[0],o=n[1],l=Object(a.useState)(0),i=Object(h.a)(l,2),u=i[0],m=i[1],d=Object(g.f)(),E=e.messages,p=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e})),t.current}(e);Object(a.useEffect)((function(){_()}),[]),Object(a.useEffect)((function(){if(void 0!==p&&(null===p||void 0===p?void 0:p.messages.length)!==E.length&&"/chat"!==d.pathname){var e=E[(null===p||void 0===p?void 0:p.messages.length)-1];o((function(t){return[].concat(Object(f.a)(t),[e])})),m(r.length+1)}}),[E]);var _=function(){e.connectSocket()};return c.a.createElement("div",{className:"header ".concat(k.a.navbar)},c.a.createElement("nav",null,c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(s.b,{to:"/chat",className:k.a.navbar__link,activeClassName:"active",onClick:function(e){o([]),m(0)}},"Chat",u>0?c.a.createElement("span",{className:k.a.chatNotification},u):"")),c.a.createElement("li",null,c.a.createElement(s.b,{to:"/settings",className:k.a.navbar__link,activeClassName:"active"},"Settings"))),c.a.createElement(b,{toggleTheme:e.toggleTheme})))})),O=n(8),C=n(21),j=n.n(C),y=n(67),T=n.n(y),w=n(101),P=n.n(w),x=n(175),M=n(165),G=n.n(M),D=n(166),I=n.n(D),F=function(e){var t="24h"===e.clockFormat?P()(e.date).format("HH:mm"):P()(e.date).format("hh:mm A"),n=e.username===ge.getState().settings.username?"right":"left";return c.a.createElement("div",{className:"".concat(j.a.bubbleContainer," ").concat(n)},c.a.createElement("div",{className:"".concat(j.a.chatPanel__messageBubble," ").concat(j.a[n]," chat-").concat(n)},c.a.createElement("span",{className:"".concat(j.a.date," date_field")},t),c.a.createElement("p",{className:j.a.paragraph},c.a.createElement(G.a,null,c.a.createElement(I.a,{text:e.text})))),c.a.createElement(x.a,{className:j.a.avatar,name:e.username,round:!0,size:"45"}))},A=function(e){e.userName;var t=e.onEnter,n=e.message,a=e.sendMessage,r=e.updateMessage,o=function(){""!==n&&a(n)};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:T.a.inputContainer},c.a.createElement("input",{type:"text",value:n,onChange:r,onKeyPress:function(e){t&&e.ctrlKey&&13===e.charCode&&o()},className:"chat-input",placeholder:"Type a message..."}),c.a.createElement("button",{onClick:o},"Send")))},W=Object(i.b)((function(e){return{messages:e.chat.messages,settings:e.settings,socket:e.socketState}}),{sendMessage:function(e){return{type:"SEND_MESSAGE",payload:e}},getSettings:v})((function(e){var t=Object(a.useState)({text:""}),n=Object(h.a)(t,2),r=n[0],o=n[1];Object(a.useEffect)((function(){i("auto")}),[e]);var s=Object(a.useRef)(null),l=Object(a.useRef)(null),i=function(e){var t,n,a=(null===(t=l.current)||void 0===t?void 0:t.offsetTop)?l.current.offsetTop:0;null===(n=s.current)||void 0===n||n.scrollTo({behavior:e,top:a})},u=e.messages;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:j.a.chatPanelWrapper},c.a.createElement("div",{className:"chatPanel ".concat(j.a.chatPanel),ref:s},u.map((function(t,n){return c.a.createElement(F,{key:n,position:t.position,text:t.message,date:t.date,clockFormat:e.settings.clockFormat,username:t.user})})),c.a.createElement("div",{ref:l}))),c.a.createElement("div",{className:T.a.inputContainer},c.a.createElement(A,{message:r.text,userName:e.settings.username,onEnter:e.settings.onEnter,sendMessage:function(t){e.sendMessage({user:e.settings.username,message:t,date:new Date,position:"right"}),o({text:""}),i("smooth")},updateMessage:function(e){var t=Object(O.a)({},r);t.text=e.currentTarget.value,o({text:t.text})}})))})),H=function(){return c.a.createElement("div",{className:"container"},c.a.createElement(W,null))},R=n(28),B=n.n(R),J=Object(i.b)((function(e){return{settings:e.settings}}),{getSettings:v,setSettings:function(e){return{type:"SET_SETTINGS",payload:e}},resetSettings:function(){return{type:"RESET_SETTINGS"}}})((function(e){var t=Object(a.useState)(e.settings.username),n=Object(h.a)(t,2),r=n[0],o=n[1],s=Object(a.useState)({clock:e.settings.clockFormat}),l=Object(h.a)(s,2),i=l[0],u=l[1],m=Object(a.useState)(e.settings.onEnter),d=Object(h.a)(m,2),g=d[0],f=d[1];Object(a.useEffect)((function(){o(e.settings.username),u({clock:e.settings.clockFormat}),f(e.settings.onEnter)}),[e.settings]);return c.a.createElement("div",{className:"container ".concat(B.a.formOuter)},c.a.createElement("div",{className:B.a.formWrapper},c.a.createElement("h1",null,"Settings"),c.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.setSettings({username:r,clockFormat:i.clock,onEnter:g,current:!0,unread:4})},className:"form",noValidate:!0},c.a.createElement("div",{className:B.a.formControl},c.a.createElement("label",{htmlFor:"username"},"Username",c.a.createElement("input",{type:"text",name:"username",value:r,onChange:function(e){return o(e.currentTarget.value)}}))),c.a.createElement("div",{className:B.a.formControl},c.a.createElement("label",{htmlFor:"clock"},"Clock Display",c.a.createElement("div",{className:B.a.checkboxWrapper},c.a.createElement("input",{type:"radio",name:"clock",checked:"12h"===i.clock,onChange:function(e){return u({clock:"12h"})}}),c.a.createElement("span",null,"12h"),c.a.createElement("input",{type:"radio",name:"clock",checked:"24h"===i.clock,onChange:function(e){return u({clock:"24h"})}}),c.a.createElement("span",null,"24h")))),c.a.createElement("div",{className:B.a.formControl},c.a.createElement("label",{htmlFor:"sendOnEnter"},"Send Messages on CTRL + Enter",c.a.createElement("div",{className:B.a.checkboxWrapper},c.a.createElement("input",{type:"radio",name:"sendOnEnter",checked:g,onChange:function(e){return f(!0)}}),c.a.createElement("span",null,"On"),c.a.createElement("input",{type:"radio",name:"sendOnEnter",checked:!g,onChange:function(e){return f(!1)}}),c.a.createElement("span",null,"Off")))),c.a.createElement("button",{type:"submit"},"SUBMIT"),c.a.createElement("button",{type:"reset",onClick:function(t){return t.preventDefault(),void e.resetSettings()}},"RESET SETTINGS"))))})),L=n(169);function K(){var e=Object(L.a)(["\n  body {\n    background-color: ",";\n    color: ","\n  }\n\n  .header {\n    background-color: ",";\n    color: ","\n  }\n\n  span.date_field {\n    color: ","\n  }\n\n  input {\n    border-color: ","\n  }\n\n  .header nav ul li a:hover {\n    background-color: ",";\n    color: ",";\n  }\n\n  .header nav ul li a.active {\n    border-bottom:1px solid  ",";\n  }\n"]);return K=function(){return e},e}var U="#24252A",z="#131313",V="#fefefe",X="#fefefe",Y="#fef2f3",Q="#24252A",q=Object(d.b)(K(),(function(e){return"dark"===e.theme.mode?U:X}),(function(e){return"dark"===e.theme.mode?V:Q}),(function(e){return"dark"===e.theme.mode?z:Y}),(function(e){return"dark"===e.theme.mode?V:Q}),(function(e){return"dark"===e.theme.mode?V:Q}),(function(e){return"dark"===e.theme.mode?V:Q}),(function(e){return"dark"===e.theme.mode?V:Q}),(function(e){return"light"===e.theme.mode?V:Q}),(function(e){return"dark"===e.theme.mode?V:Q})),Z=function(){return c.a.createElement(q,null)},$={mode:localStorage.getItem("theme")||"light"},ee=function(){var e=Object(a.useState)($),t=Object(h.a)(e,2),n=t[0],r=t[1];return c.a.createElement(d.a,{theme:n},c.a.createElement(Z,null),c.a.createElement(N,{toggleTheme:function(){"dark"===n.mode?(r({mode:"light"}),localStorage.setItem("theme","light")):(r({mode:"dark"}),localStorage.setItem("theme","dark"))}}),c.a.createElement(g.c,null,c.a.createElement(g.a,{path:"/",exact:!0,component:H}),c.a.createElement(g.a,{path:"/settings",component:J}),c.a.createElement(g.a,{path:"/chat",component:H})))},te={messages:[{user:"J B",message:"Welcome to the chat room. Feel free to open a new (incognito \ud83d\udd75\ufe0f) browser window to chat with yourself",position:"right",date:new Date},{user:"James Bond",message:"You can hover on my avatar to reveal my secret identity :gun:",position:"right",date:new Date}]};var ne={username:"Adis",clockFormat:"24h",onEnter:!0,current:!0,unread:5};var ae={connected:!1,port:3001};var ce=Object(l.combineReducers)({chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND_MESSAGE":case"GET_MESSAGES":return Object(O.a)({},e);case"SEND_MESSAGE_RESPONSE":return Object(O.a)({},e,{messages:[].concat(Object(f.a)(e.messages),[t.payload])});default:return Object(O.a)({},e)}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_SETTINGS":return Object(O.a)({},e);case"SET_SETTINGS":return Object(O.a)({},t.payload);case"RESET_SETTINGS":return ne;default:return Object(O.a)({},e)}},socketState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONNECTION_CHANGED":return Object(O.a)({},e,{connected:t.connected,isError:!1});default:return Object(O.a)({},e)}}}),re=n(173),oe=n(174),se=n.n(oe),le="connect",ie="message",ue=function e(t,n){var a=this;Object(re.a)(this,e),this.user=void 0,this.port=void 0,this.onChange=void 0,this.onMessage=void 0,this.socket=void 0,this.connect=function(e,t){a.user=e,a.port=t;var n="http://localhost:".concat(t);a.socket=se.a.connect(n),a.socket.on(le,a.onConnected)},this.onConnected=function(){a.socket.on(ie,a.onMessage),a.onChange(!0)},this.sendMessage=function(e){"function"===typeof a.socket.emit?a.socket.emit(ie,e):console.error("Cannot emit - socket.io disconnected.")},this.disconnect=function(){return a.socket.close()},this.onChange=t,this.onMessage=n,this.socket="",this.user="",this.port=""},me=function(e){var t=new ue((function(t){e.dispatch(function(e){return{type:"CONNECTION_CHANGED",connected:e,isError:!1}}(t))}),(function(t){return e.dispatch(function(e){return{type:"SEND_MESSAGE_RESPONSE",payload:e}}(t))}));return function(n){return function(a){var c=e.getState().settings.username,r=e.getState().socketState;switch(a.type){case"CONNECT_SOCKET":t.connect(c,r.port);break;case"SEND_MESSAGE":t.sendMessage(a.payload),e.dispatch({type:"MESSAGE_SENT"})}return n(a)}}};n.d(t,"store",(function(){return ge}));var he=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),de=[u.a,me],ge=Object(l.createStore)(ce,he,Object(m.composeWithDevTools)(l.applyMiddleware.apply(void 0,de)));ge.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(n){console.log(n)}}({settings:ge.getState().settings})})),o.a.render(c.a.createElement(i.a,{store:ge},c.a.createElement(s.a,null,c.a.createElement(ee,null))),document.getElementById("root"))},28:function(e,t,n){e.exports={formOuter:"Settings_formOuter__3oLA1",formWrapper:"Settings_formWrapper__3gXS0",formControl:"Settings_formControl__2SgaE",checkboxWrapper:"Settings_checkboxWrapper__1DjvL"}},44:function(e,t,n){e.exports={outerSwitch:"toggleSwitch_outerSwitch__191z3",switch:"toggleSwitch_switch__o5w6M",switchLabel:"toggleSwitch_switchLabel__1D6nD",toggle:"toggleSwitch_toggle__3NQFC"}},45:function(e,t,n){e.exports={navbar:"Header_navbar__3_cAc",navbar__link:"Header_navbar__link__XfTO2",active:"Header_active__11sd3",chatNotification:"Header_chatNotification__kCYB-"}},67:function(e,t,n){e.exports={inputContainer:"InputField_inputContainer__HGwLU"}}},[[177,1,2]]]);
//# sourceMappingURL=main.9463891b.chunk.js.map